<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Dropdown Kelurahan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        select {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
        }
        label {
            font-weight: bold;
            display: block;
            margin-top: 20px;
        }
        .result {
            background: #f0f0f0;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Test Dropdown Kelurahan - Kota Semarang</h1>
    
    <label>Provinsi:</label>
    <select id="provinsi">
        <option value="">Pilih Provinsi</option>
        <option value="Jawa Tengah">Jawa Tengah</option>
    </select>
    
    <label>Kota:</label>
    <select id="kota">
        <option value="">Pilih Kota</option>
    </select>
    
    <label>Kecamatan:</label>
    <select id="kecamatan">
        <option value="">Pilih Kecamatan</option>
    </select>
    
    <label>Kelurahan:</label>
    <select id="kelurahan">
        <option value="">Pilih Kelurahan</option>
    </select>
    
    <div class="result" id="result"></div>

<script>
// Data Wilayah untuk Kota Semarang
const wilayahData = {
    "Jawa Tengah": {
        "Kota Semarang": {
            "Semarang Tengah": ["Purwodinatan", "Kauman", "Pekunden", "Miroto", "Brumbungan", "Pandansari", "Pindrikan Kidul", "Pindrikan Lor", "Kranggan", "Gabahan", "Jagalan", "Karangkidul", "Kembangsari", "Bangunharjo"],
            "Semarang Utara": ["Kuningan", "Bandarharjo", "Tanjung Mas", "Panggung Lor", "Plombokan", "Purwosari", "Dadapsari", "Bulu Lor"],
            "Tembalang": ["Tembalang", "Bulusan", "Mangunharjo", "Meteseh", "Sendangmulyo", "Kramas", "Tandang", "Rowosari", "Sendangguwo", "Sambiroto", "Jangli"],
            "Banyumanik": ["Banyumanik", "Srondol Kulon", "Srondol Wetan", "Tinjomoyo", "Ngesrep", "Sumurboto", "Padangsari", "Pedalangan", "Pudakpayung", "Gedawang"],
            "Gunungpati": ["Gunungpati", "Sadeng", "Pongangan", "Pakintelan", "Nongkosawit", "Sukorejo", "Kandri", "Ngijo", "Sekaran", "Mangunsari", "Plalangan", "Patemon"]
        }
    }
};

const provinsiSelect = document.getElementById('provinsi');
const kotaSelect = document.getElementById('kota');
const kecamatanSelect = document.getElementById('kecamatan');
const kelurahanSelect = document.getElementById('kelurahan');
const resultDiv = document.getElementById('result');

function updateResult(message) {
    resultDiv.innerHTML += message + '<br>';
    console.log(message);
}

// Event listener untuk Provinsi
provinsiSelect.addEventListener('change', function() {
    const selectedProvinsi = this.value;
    updateResult('✓ Provinsi dipilih: ' + selectedProvinsi);
    
    kotaSelect.innerHTML = '<option value="">Pilih Kota</option>';
    kecamatanSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
    kelurahanSelect.innerHTML = '<option value="">Pilih Kelurahan</option>';
    
    if (selectedProvinsi && wilayahData[selectedProvinsi]) {
        const kotaList = Object.keys(wilayahData[selectedProvinsi]);
        kotaList.forEach(kota => {
            const option = document.createElement('option');
            option.value = kota;
            option.textContent = kota;
            kotaSelect.appendChild(option);
        });
        updateResult('✓ Kota ter-populate: ' + kotaList.length + ' kota');
    }
});

// Event listener untuk Kota
kotaSelect.addEventListener('change', function() {
    const selectedProvinsi = provinsiSelect.value;
    const selectedKota = this.value;
    updateResult('✓ Kota dipilih: ' + selectedKota);
    
    kecamatanSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
    kelurahanSelect.innerHTML = '<option value="">Pilih Kelurahan</option>';
    
    if (selectedProvinsi && selectedKota && wilayahData[selectedProvinsi][selectedKota]) {
        const kotaData = wilayahData[selectedProvinsi][selectedKota];
        
        if (Array.isArray(kotaData)) {
            updateResult('⚠ Format data: ARRAY (no kelurahan)');
            kotaData.forEach(kecamatan => {
                const option = document.createElement('option');
                option.value = kecamatan;
                option.textContent = kecamatan;
                kecamatanSelect.appendChild(option);
            });
        } else {
            updateResult('✓ Format data: OBJECT (with kelurahan)');
            const kecamatanList = Object.keys(kotaData);
            kecamatanList.forEach(kecamatan => {
                const option = document.createElement('option');
                option.value = kecamatan;
                option.textContent = kecamatan;
                kecamatanSelect.appendChild(option);
            });
            updateResult('✓ Kecamatan ter-populate: ' + kecamatanList.length + ' kecamatan');
        }
    }
});

// Event listener untuk Kecamatan
kecamatanSelect.addEventListener('change', function() {
    const selectedProvinsi = provinsiSelect.value;
    const selectedKota = kotaSelect.value;
    const selectedKecamatan = this.value;
    updateResult('✓ Kecamatan dipilih: ' + selectedKecamatan);
    
    kelurahanSelect.innerHTML = '<option value="">Pilih Kelurahan</option>';
    
    if (selectedProvinsi && selectedKota && selectedKecamatan) {
        const kotaData = wilayahData[selectedProvinsi][selectedKota];
        updateResult('✓ Checking kotaData...');
        
        if (!Array.isArray(kotaData) && kotaData[selectedKecamatan]) {
            const kelurahanList = kotaData[selectedKecamatan];
            updateResult('✓ Kelurahan ditemukan: ' + kelurahanList.length + ' kelurahan');
            
            kelurahanList.forEach(kelurahan => {
                const option = document.createElement('option');
                option.value = kelurahan;
                option.textContent = kelurahan;
                kelurahanSelect.appendChild(option);
            });
            updateResult('✅ SUCCESS! Kelurahan ter-populate!');
        } else {
            updateResult('❌ GAGAL: Tidak ada data kelurahan untuk kecamatan ini');
        }
    }
});
</script>

</body>
</html>
